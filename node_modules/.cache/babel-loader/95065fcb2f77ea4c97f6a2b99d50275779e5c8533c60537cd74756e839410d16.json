{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { selectControlInfo } from '../../control/control-slice';\nimport { selectOpeningInfo } from '../../opening/opening-slice';\nimport { setFinishTime, setDuration, setClosingDescription, selectClosingInfo } from '../closing-slice';\nimport { sortTg } from '../../../static/helpers/var';\nimport { timeDuration } from '../../../static/helpers/timeDuration';\nimport { useCopyClosing } from './use-copy-closing';\nexport const useClosing = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    qualities,\n    stand,\n    tg,\n    priority,\n    effect\n  } = useSelector(store => selectControlInfo(store).controls);\n  const {\n    isInside,\n    openingTitle,\n    jiraId,\n    systemAdmins,\n    startTime\n  } = useSelector(store => selectOpeningInfo(store).data);\n  const {\n    finishTime,\n    closingDescription,\n    duration\n  } = useSelector(store => selectClosingInfo(store).data);\n  const {\n    copySummary\n  } = useCopyClosing(qualities, stand, tg, priority, effect, isInside, openingTitle, jiraId, startTime, systemAdmins, finishTime, duration, closingDescription);\n  const [finishDate, setFinishDate] = useState(new Date());\n  const [durationIncident, setDurationIncident] = useState(null);\n  const handelChange = e => {\n    dispatch(setClosingDescription(e.target.value));\n  };\n  useEffect(() => {\n    if (finishDate) {\n      dispatch(setFinishTime(finishDate.toString()));\n      setDurationIncident(timeDuration(startTime, finishDate));\n    }\n  }, [finishDate]);\n  useEffect(() => {\n    const mathFloor = true;\n    setDurationIncident(timeDuration(startTime, finishDate, mathFloor));\n  }, [startTime]);\n  useEffect(() => {\n    dispatch(setDuration(durationIncident));\n  }, [durationIncident]);\n  return {\n    copySummary,\n    handelChange,\n    stand,\n    qualities,\n    tg: sortTg(tg),\n    priority,\n    effect,\n    isInside,\n    openingTitle,\n    jiraId,\n    systemAdmins,\n    setFinishDate,\n    finishDate,\n    closingDescription,\n    durationIncident\n  };\n};\n_s(useClosing, \"VkDcT3HyRIeAY+b/31TVnLXcgX4=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useCopyClosing];\n});","map":{"version":3,"names":["useEffect","useState","useDispatch","useSelector","selectControlInfo","selectOpeningInfo","setFinishTime","setDuration","setClosingDescription","selectClosingInfo","sortTg","timeDuration","useCopyClosing","useClosing","_s","dispatch","qualities","stand","tg","priority","effect","store","controls","isInside","openingTitle","jiraId","systemAdmins","startTime","data","finishTime","closingDescription","duration","copySummary","finishDate","setFinishDate","Date","durationIncident","setDurationIncident","handelChange","e","target","value","toString","mathFloor"],"sources":["/Users/admin/developing/Temp-March-31/src/features/closing/hooks/use-closing.js"],"sourcesContent":["import {useEffect, useState} from 'react'\nimport {useDispatch, useSelector} from 'react-redux'\n\nimport {selectControlInfo} from '../../control/control-slice'\nimport {selectOpeningInfo} from '../../opening/opening-slice'\nimport {setFinishTime, setDuration, setClosingDescription, selectClosingInfo} from '../closing-slice'\n\nimport {sortTg} from '../../../static/helpers/var'\nimport {timeDuration} from '../../../static/helpers/timeDuration'\nimport {useCopyClosing} from './use-copy-closing'\n\nexport const useClosing = () => {\n    const dispatch = useDispatch()\n    const {qualities, stand, tg, priority, effect} = useSelector(store => selectControlInfo(store).controls)\n    const {isInside, openingTitle, jiraId, systemAdmins, startTime} = useSelector(store => selectOpeningInfo(store).data)\n    const {finishTime, closingDescription, duration} = useSelector(store => selectClosingInfo(store).data)\n    const {copySummary} = useCopyClosing(qualities, stand, tg, priority, effect, isInside, openingTitle, jiraId, startTime, systemAdmins, finishTime, duration, closingDescription)\n    const [finishDate, setFinishDate] = useState(new Date())\n    const [durationIncident, setDurationIncident] = useState(null)\n\n    const handelChange = (e) => {\n        dispatch(setClosingDescription(e.target.value))\n    }\n\n    useEffect(() => {\n        if (finishDate) {\n            dispatch(setFinishTime(finishDate.toString()))\n            setDurationIncident(timeDuration(startTime, finishDate))\n        }\n    }, [finishDate])\n\n    useEffect(() => {\n        const mathFloor = true\n        setDurationIncident(timeDuration(startTime, finishDate, mathFloor))\n    }, [startTime])\n\n    useEffect(() => {\n        dispatch(setDuration(durationIncident))\n    }, [durationIncident])\n\n    return {\n        copySummary,\n        handelChange,\n\n        stand,\n        qualities,\n        tg: sortTg(tg),\n        priority,\n        effect,\n\n        isInside,\n        openingTitle,\n        jiraId,\n        systemAdmins,\n\n        setFinishDate,\n        finishDate,\n        closingDescription,\n        durationIncident,\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}